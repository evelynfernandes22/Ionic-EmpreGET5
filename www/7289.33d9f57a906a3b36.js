"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7289],{7289:(R,r,s)=>{s.r(r),s.d(r,{OsViewPageModule:()=>U});var c=s(6895),u=s(433),d=s(4556),l=s(6773),i=s(8256),p=s(6247),g=s(9426);function v(o,a){if(1&o&&(i.TgZ(0,"div")(1,"ion-col")(2,"p",7),i._uU(3,"Prestador:"),i.qZA(),i.TgZ(4,"div",12),i._uU(5),i.qZA()()()),2&o){const e=i.oxw();i.xp6(5),i.Oqu(null==e.pedido?null:e.pedido.nomePrestador)}}function h(o,a){if(1&o&&(i.TgZ(0,"div")(1,"ion-col")(2,"p",7),i._uU(3,"Cliente:"),i.qZA(),i.TgZ(4,"div",12),i._uU(5),i.qZA()()()),2&o){const e=i.oxw();i.xp6(5),i.Oqu(null==e.pedido?null:e.pedido.nomeCliente)}}function _(o,a){1&o&&(i.TgZ(0,"div",9)(1,"p"),i._uU(2,"Avalia\xe7\xe3o recebida"),i.qZA()())}function A(o,a){1&o&&(i.TgZ(0,"div"),i._uU(1,"SEM AVALIA\xc7\xc3O"),i.qZA())}function f(o,a){if(1&o&&(i.TgZ(0,"div")(1,"div",9),i._uU(2,"Nota:"),i.qZA(),i._uU(3),i.ALo(4,"number"),i.qZA()),2&o){const e=i.oxw();i.xp6(3),i.hij(" ",i.xi3(4,1,e.estrelas,"1.1-2"),"")}}function O(o,a){if(1&o&&(i.TgZ(0,"div")(1,"div",9),i._uU(2,"Coment\xe1rios:"),i.qZA(),i._uU(3),i.qZA()),2&o){const e=i.oxw();i.xp6(3),i.hij(" ",e.comentarios,"")}}function S(o,a){if(1&o&&(i.TgZ(0,"p",9),i._uU(1),i.qZA()),2&o){const e=i.oxw();i.xp6(1),i.hij("Atualizado em: ",e.dataDaFinalizacao,"")}}function m(o,a){if(1&o&&(i.TgZ(0,"p",9),i._uU(1),i.qZA()),2&o){const e=i.oxw();i.xp6(1),i.hij("Atualizado em: ",e.dataDaSolicitacao,"")}}function P(o,a){if(1&o){const e=i.EpF();i.TgZ(0,"div")(1,"ion-button",16),i.NdJ("click",function(){i.CHM(e);const n=i.oxw(2);return i.KtG(n.onClickCancelarOS())}),i._uU(2," Cancelar OS "),i.qZA()()}}function Z(o,a){if(1&o){const e=i.EpF();i.TgZ(0,"div")(1,"ion-button",17),i.NdJ("click",function(){i.CHM(e);const n=i.oxw(2);return i.KtG(n.onClickAvaliarOS(null==n.pedido?null:n.pedido.id))}),i._uU(2," Avaliar Prestador "),i.qZA()()}}function b(o,a){if(1&o){const e=i.EpF();i.TgZ(0,"div")(1,"ion-grid")(2,"ion-row",13)(3,"ion-col",14),i.YNc(4,P,3,0,"div",6),i.qZA(),i.TgZ(5,"ion-col",14),i.YNc(6,Z,3,0,"div",6),i.qZA(),i.TgZ(7,"ion-col",14)(8,"ion-button",15),i.NdJ("click",function(){i.CHM(e);const n=i.oxw();return i.KtG(n.onClickVoltar())}),i._uU(9," Voltar "),i.qZA()()()()()}if(2&o){const e=i.oxw();i.xp6(4),i.Q6J("ngIf","CANCELADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"PENDENTE"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"RECUSADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"FINALIZADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico)),i.xp6(2),i.Q6J("ngIf","FINALIZADO"==(null==e.pedido?null:e.pedido.statusOrdemServico)&&void 0===e.avaliacao)}}function C(o,a){if(1&o){const e=i.EpF();i.TgZ(0,"div")(1,"ion-button",19),i.NdJ("click",function(){i.CHM(e);const n=i.oxw(2);return i.KtG(n.onClickAceitarOS())}),i._uU(2," Aceitar "),i.qZA()()}}function D(o,a){if(1&o){const e=i.EpF();i.TgZ(0,"div")(1,"ion-button",20),i.NdJ("click",function(){i.CHM(e);const n=i.oxw(2);return i.KtG(n.onClickRecusarOS())}),i._uU(2," Recusar OS "),i.qZA()()}}function T(o,a){1&o&&(i.TgZ(0,"div")(1,"ion-button",21),i._uU(2," Finalizar OS "),i.qZA()())}function w(o,a){if(1&o&&(i.TgZ(0,"div"),i.YNc(1,T,3,0,"div",6),i.qZA()),2&o){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf","PENDENTE"===(null==e.pedido?null:e.pedido.statusOrdemServico))}}function x(o,a){if(1&o){const e=i.EpF();i.TgZ(0,"div")(1,"ion-grid")(2,"ion-row")(3,"ion-col",13),i.YNc(4,C,3,0,"div",6),i.YNc(5,D,3,0,"div",6),i.YNc(6,w,2,1,"div",6),i.TgZ(7,"div")(8,"ion-button",18),i.NdJ("click",function(){i.CHM(e);const n=i.oxw();return i.KtG(n.onClickVoltar())}),i._uU(9," Voltar "),i.qZA()()()()()()}if(2&o){const e=i.oxw();i.xp6(4),i.Q6J("ngIf","CANCELADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"PENDENTE"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"RECUSADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"FINALIZADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico)),i.xp6(1),i.Q6J("ngIf","CANCELADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"PENDENTE"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"RECUSADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"FINALIZADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico)),i.xp6(1),i.Q6J("ngIf","CANCELADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"AGUARDANDO_ACEITE"!==(null==e.pedido?null:e.pedido.statusOrdemServico)&&"FINALIZADO"!==(null==e.pedido?null:e.pedido.statusOrdemServico))}}const E=[{path:"",component:(()=>{class o{constructor(e,t,n){this.apiService=e,this.eventService=t,this.router=n,this.estrelas=null,this.comentarios="",this.osCadastradaSubscription=this.eventService.osCadastrada$.subscribe(()=>{this.getPedidosByIdAndRefresh(),this.getPedidosPageAndRefresh()}),this.osCanceladaSubscription=this.eventService.osCancelada$.subscribe(()=>{this.getPedidosByIdAndRefresh(),this.getPedidosPageAndRefresh()}),this.osAceiteSubscription=this.eventService.osAceite$.subscribe(()=>{this.getPedidosPageAndRefresh(),this.getPedidosByIdAndRefresh()}),this.osRecusadaSubscription=this.eventService.osRecusada$.subscribe(()=>{this.getPedidosByIdAndRefresh(),this.getPedidosPageAndRefresh()}),this.osFinalizadaSubscription=this.eventService.osFinalizada$.subscribe(()=>{this.getPedidosByIdAndRefresh(),this.getPedidosPageAndRefresh()})}ngOnInit(){this.tipoUser=this.apiService.getUserRole(),this.idPedido=this.apiService.readId(),this.getPedidosByIdAndRefresh(),this.getAvaliacaoByIdOSAndRefresh()}ngOnChanges(e){this.getPedidosPageAndRefresh()}ngOnDestroy(){this.osCadastradaSubscription.unsubscribe(),this.osCanceladaSubscription.unsubscribe(),this.osAceiteSubscription.unsubscribe(),this.osRecusadaSubscription.unsubscribe(),this.osFinalizadaSubscription.unsubscribe()}onClickVoltar(){this.apiService.addCurrentPage(0),this.getPedidosPageAndRefresh(),this.router.navigateByUrl("/historico-agendamentos")}onClickCancelarOS(){this.cancelaOSAndRefresh()}onClickAceitarOS(){this.aceitaOSAndRefresh()}onClickRecusarOS(){this.recusaOSAndRefresh()}onClickAvaliarOS(e){this.apiService.addId(e)}cancelaOSAndRefresh(){this.apiService.putCancelarOS().subscribe(e=>{this.getPedidosByIdAndRefresh(),this.getPedidosPageAndRefresh(),this.dataDaSolicitacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaSolicitacao),this.dataDaFinalizacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaFinalizacao),this.eventService.emitOSCancelada()},e=>{console.error("Erro CANCELAR OS",e)})}aceitaOSAndRefresh(){this.apiService.putAceiteOS().subscribe(e=>{this.getPedidosByIdAndRefresh(),this.getPedidosPageAndRefresh(),this.dataDaSolicitacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaSolicitacao),this.dataDaFinalizacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaFinalizacao),this.eventService.emitOSAceite()},e=>{console.error("Erro ACEITE OS",e)})}recusaOSAndRefresh(){this.apiService.putRecusarOS().subscribe(e=>{this.getPedidosByIdAndRefresh(),this.getPedidosPageAndRefresh(),this.eventService.emitOSRecusada(),this.dataDaSolicitacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaSolicitacao),this.dataDaFinalizacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaFinalizacao)},e=>{console.error("Erro ACEITE OS",e)})}getPedidosByIdAndRefresh(){this.apiService.getByIdPedido().subscribe(e=>{this.pedido=e,this.dataDaSolicitacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaSolicitacao),this.dataDaFinalizacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaFinalizacao)},e=>{console.error("Erro ao obter dados dos pedidos:",e)})}getPedidosPageAndRefresh(){this.apiService.getPedidosPage().subscribe(e=>{this.pedidos=e,this.dataDaSolicitacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaSolicitacao),this.dataDaFinalizacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaFinalizacao)},e=>{console.error("Erro ao obter dados dos pedidos:",e)})}getAvaliacaoByIdOSAndRefresh(){this.apiService.getAvaliacoesByIdOS().subscribe(e=>{this.avaliacao=e,this.estrelas=this.avaliacao.conteudo[0].estrelas,this.comentarios=this.avaliacao.conteudo[0].comentario,this.dataDaSolicitacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaSolicitacao),this.dataDaFinalizacao=this.apiService.converterDataAtualizacao(this.pedido.dataDaFinalizacao)})}}return o.\u0275fac=function(e){return new(e||o)(i.Y36(p.s),i.Y36(g.P),i.Y36(l.F0))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-os-view"]],features:[i.TTD],decls:66,vars:27,consts:[[1,"header"],["src","../../../../assets/images/logo_empreget.png"],["slot","start"],["align","center",2,"padding-top","20px","font-size","large"],["fill","clear"],[1,"ion-align-items-start"],[4,"ngIf"],[1,"texto","ion-text-left"],[1,"ion-text-left"],[1,"texto"],[2,"font-weight","bold","font-size","medium"],["class","texto",4,"ngIf"],[1,"ion-text-left",2,"font-weight","bold","font-size","medium"],[1,"justify-content-center"],[2,"padding","20px 10px"],["shape","round","fill","outline","custom","custom-button",3,"click"],["shape","round","fill","outline","color","danger",1,"custom-button",3,"click"],["shape","round","fill","outline","routerLink","/avaliacao",1,"custom-button",3,"click"],["shape","round","fill","outline","color","primary","routerLink","/historico-agendamentos",1,"custom-button",3,"click"],["shape","round","fill","outline","color","success",1,"custom-button",3,"click"],["shape","round","fill","outline","color","warning",1,"custom-button",3,"click"],["shape","round","fill","outline","color","success","routerLink","/finalizar-os",1,"custom-button"]],template:function(e,t){1&e&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"div",0),i._UZ(3,"img",1),i.TgZ(4,"ion-title"),i._uU(5),i.qZA()(),i._UZ(6,"ion-menu-button",2),i.qZA()(),i._UZ(7,"br"),i.TgZ(8,"ion-content")(9,"div",3),i._uU(10," Ordem de Servi\xe7o n"),i.TgZ(11,"sup"),i._uU(12,"o"),i.qZA(),i._uU(13),i.qZA(),i._UZ(14,"br")(15,"br"),i.TgZ(16,"ion-item")(17,"ion-label",4)(18,"ion-grid")(19,"ion-row",5),i.YNc(20,v,6,1,"div",6),i.YNc(21,h,6,1,"div",6),i.TgZ(22,"ion-col")(23,"p",7),i._uU(24,"Data agendada:"),i.qZA(),i.TgZ(25,"p",8),i._uU(26),i.qZA()()()(),i._UZ(27,"br"),i.TgZ(28,"p",9),i._uU(29,"Endere\xe7o do Servi\xe7o: "),i.qZA(),i.TgZ(30,"p"),i._uU(31),i.qZA(),i.TgZ(32,"p"),i._uU(33),i.qZA(),i.TgZ(34,"p"),i._uU(35),i.qZA(),i.TgZ(36,"p",9),i._uU(37,"Per\xedodo solicitado: "),i.qZA(),i.TgZ(38,"p"),i._uU(39),i.qZA(),i._UZ(40,"br"),i.TgZ(41,"p",9),i._uU(42,"Servi\xe7o contratado:"),i.qZA(),i.TgZ(43,"p"),i._uU(44),i.qZA(),i._UZ(45,"br"),i.TgZ(46,"p",9),i._uU(47,"Valor contratado:"),i.qZA(),i.TgZ(48,"p"),i._uU(49),i.ALo(50,"number"),i.qZA(),i._UZ(51,"br")(52,"br"),i.TgZ(53,"p",9),i._uU(54,"Status da O.S."),i.qZA(),i.TgZ(55,"div",10),i._uU(56),i.qZA(),i._UZ(57,"br"),i.YNc(58,_,3,0,"div",11),i.YNc(59,A,2,0,"div",6),i.YNc(60,f,5,4,"div",6),i.YNc(61,O,4,1,"div",6),i.YNc(62,S,2,1,"p",11),i.YNc(63,m,2,1,"p",11),i.qZA()(),i.YNc(64,b,10,2,"div",6),i.YNc(65,x,10,3,"div",6),i.qZA()),2&e&&(i.xp6(5),i.Oqu(t.tipoUser),i.xp6(8),i.hij(" ",t.idPedido," "),i.xp6(7),i.Q6J("ngIf","CLIENTE"==t.tipoUser),i.xp6(1),i.Q6J("ngIf","PRESTADOR"==t.tipoUser),i.xp6(5),i.Oqu(null==t.pedido?null:t.pedido.dataServico),i.xp6(5),i.lnq("",null==t.pedido?null:t.pedido.localDoServico.logradouro,", ",null==t.pedido?null:t.pedido.localDoServico.numero,", ",null==t.pedido?null:t.pedido.localDoServico.complemento,""),i.xp6(2),i.Oqu(null==t.pedido?null:t.pedido.localDoServico.bairro),i.xp6(2),i.AsE("",null==t.pedido?null:t.pedido.localDoServico.cidade,"- ",null==t.pedido?null:t.pedido.localDoServico.estado,""),i.xp6(4),i.AsE("",null==t.pedido?null:t.pedido.periodo,"/",null==t.pedido?null:t.pedido.tipoDeDiaria,""),i.xp6(5),i.hij(" ",null==t.pedido?null:t.pedido.servico.descricao,""),i.xp6(5),i.hij("R$ ",i.xi3(50,24,null==t.pedido?null:t.pedido.servico.valor,"1.2-2"),""),i.xp6(7),i.Oqu(null==t.pedido?null:t.pedido.statusOrdemServico),i.xp6(2),i.Q6J("ngIf","CANCELADO"!==(null==t.pedido?null:t.pedido.statusOrdemServico)&&"RECUSADO"!==(null==t.pedido?null:t.pedido.statusOrdemServico)&&"AGUARDANDO_ACEITE"!==(null==t.pedido?null:t.pedido.statusOrdemServico)&&"PENDENTE"!==(null==t.pedido?null:t.pedido.statusOrdemServico)),i.xp6(1),i.Q6J("ngIf",null==t.estrelas&&"FINALIZADO"===(null==t.pedido?null:t.pedido.statusOrdemServico)),i.xp6(1),i.Q6J("ngIf",null!=t.estrelas&&"FINALIZADO"===(null==t.pedido?null:t.pedido.statusOrdemServico)),i.xp6(1),i.Q6J("ngIf",t.comentarios&&"FINALIZADO"===(null==t.pedido?null:t.pedido.statusOrdemServico)),i.xp6(1),i.Q6J("ngIf",null==t.pedido?null:t.pedido.dataDaFinalizacao),i.xp6(1),i.Q6J("ngIf",!(null!=t.pedido&&t.pedido.dataDaFinalizacao)),i.xp6(1),i.Q6J("ngIf","CLIENTE"==t.tipoUser),i.xp6(1),i.Q6J("ngIf","PRESTADOR"==t.tipoUser))},dependencies:[c.O5,d.YG,d.wI,d.W2,d.jY,d.Gu,d.Ie,d.Q$,d.fG,d.Nd,d.wd,d.sr,d.YI,l.rH,c.JJ],styles:[".header[_ngcontent-%COMP%]{margin:10px 0;display:flex;align-items:flex-end;text-align:right;max-width:50%}ion-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin-top:15px;margin-left:5px;font-size:60%}table[_ngcontent-%COMP%]{border-collapse:collapse;border:1px solid #ccc;width:95%;margin-left:5px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#ccc}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:2px}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:50px;padding:1px 30px}class[_ngcontent-%COMP%]   content[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin-left:5px}.custom-button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;height:35px;color:rgba(116,114,114,.8);font-size:medium;--background: #FFFF;--background-hover: #9ce0be;--border-color: #ccc;--border-style: solid;--border-width: 1px;--width: 100%;text-transform:none!important}.custom-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:first-child{margin-right:8px;color:#776f6f;font-size:inherit}.texto[_ngcontent-%COMP%]{color:#000}.texto_titulo[_ngcontent-%COMP%]{color:#000;font-weight:700;padding:0,10,10}"]}),o})()}];let I=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[l.Bz.forChild(E),l.Bz]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[c.ez,u.u5,d.Pc,I]}),o})()}}]);