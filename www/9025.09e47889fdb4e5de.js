"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9025],{9025:(A,u,d)=>{d.r(u),d.d(u,{EditarPageModule:()=>b});var p=d(6895),s=d(433),r=d(4556),g=d(6773),C=d(7582),e=d(8256),h=d(6247),m=d(9426),_=d(529);let v=(()=>{class o{constructor(t,n,l,i,c){this.apiService=t,this.eventService=n,this.http=l,this.navCtrl=i,this.alertController=c,this.clientes={},this.atualizarCliente=new e.vpe}ngOnInit(){console.log(this.apiService.readClienteId()),this.tipoUser=this.apiService.getUserRole(),this.isLoggedIn=this.apiService.readLoginStatus(),this.apiService.getDataPerfisClientes().subscribe(t=>{this.cliente=t[0],this.dataAtualizacao=this.apiService.converterDataAtualizacao(t[0].dataDaAtualizacao),console.log(this.dataAtualizacao)},t=>{console.error("Erro ao obter perfil dos prestadores:",t)})}onMudouNome(t){this.cliente.nome=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}onMudouRG(t){this.cliente.rg=t.target.value,this.atualizarCliente.emit(this.cliente)}onMudouCPF(t){this.cliente.cpf=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}onMudouEnderecoLogradouro(t){this.cliente.endereco.logradouro=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}onMudouEnderecoNumero(t){this.cliente.endereco.numero=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}onMudouEnderecoComplemento(t){this.cliente.endereco.complemento=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}onMudouEnderecoCep(t){this.cliente.endereco.cep=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}onMudouEnderecoBairro(t){this.cliente.endereco.bairro=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}onMudouEnderecoCidade(t){this.cliente.endereco.cidade=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}onMudouEnderecoEstado(t){this.cliente.endereco.estado=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}onMudouEnderecoPais(t){this.cliente.endereco.pais=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}onMudouTelefone(t){this.cliente.telefone=t.target.value,console.log(this.cliente.endereco),this.atualizarCliente.emit(this.cliente)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.s),e.Y36(m.P),e.Y36(_.eN),e.Y36(r.SH),e.Y36(r.Br))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-editar-cliente"]],inputs:{cliente:"cliente"},outputs:{atualizarCliente:"atualizarCliente"},decls:82,vars:13,consts:[["color","light"],["position","floating",1,"texto"],["type","text",3,"ngModel","keyup"],["type","number","maxlength","6",3,"ngModel","keyup"],[2,"width","150px"],["type","text","maxlength","2",3,"ngModel","keyup"],["type","text","maxlength","3",3,"ngModel","keyup"],["type","tel","placeholder","0xx-9xxxx-xxxx",3,"ngModel","keyup"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-card",0)(1,"ion-card-header")(2,"ion-card-title")(3,"b"),e._uU(4,"Meus Dados:"),e.qZA()(),e.TgZ(5,"ion-label")(6,"p"),e._uU(7),e.qZA()()(),e.TgZ(8,"ion-card-content")(9,"ion-list")(10,"ion-row")(11,"ion-col")(12,"ion-item")(13,"ion-label",1),e._uU(14,"Nome completo:"),e.qZA(),e.TgZ(15,"ion-input",2),e.NdJ("keyup",function(i){return n.onMudouNome(i)}),e.qZA()()()(),e.TgZ(16,"ion-row")(17,"ion-col")(18,"ion-item")(19,"ion-label",1),e._uU(20,"RG:"),e.qZA(),e.TgZ(21,"ion-input",2),e.NdJ("keyup",function(i){return n.onMudouRG(i)}),e.qZA()()()(),e.TgZ(22,"ion-row")(23,"ion-col")(24,"ion-item")(25,"ion-label",1),e._uU(26,"CPF:"),e.qZA(),e.TgZ(27,"ion-input",2),e.NdJ("keyup",function(i){return n.onMudouCPF(i)}),e.qZA(),e._uU(28," - "),e.qZA()()(),e.TgZ(29,"ion-row")(30,"ion-col")(31,"ion-item")(32,"ion-label",1),e._uU(33,"Logradouro:"),e.qZA(),e.TgZ(34,"ion-input",2),e.NdJ("keyup",function(i){return n.onMudouEnderecoLogradouro(i)}),e.qZA()()()(),e.TgZ(35,"ion-row")(36,"ion-col")(37,"ion-item")(38,"ion-label",1),e._uU(39,"N\xfamero:"),e.qZA(),e.TgZ(40,"ion-input",3),e.NdJ("keyup",function(i){return n.onMudouEnderecoNumero(i)}),e.qZA()()(),e.TgZ(41,"ion-col")(42,"ion-item")(43,"ion-label",1),e._uU(44,"Complemento:"),e.qZA(),e.TgZ(45,"ion-input",2),e.NdJ("keyup",function(i){return n.onMudouEnderecoComplemento(i)}),e.qZA()()()(),e.TgZ(46,"ion-row")(47,"ion-col")(48,"ion-item")(49,"ion-label",1),e._uU(50,"CEP:"),e.qZA(),e.TgZ(51,"ion-input",2),e.NdJ("keyup",function(i){return n.onMudouEnderecoCep(i)}),e.qZA()()(),e.TgZ(52,"ion-col")(53,"ion-item")(54,"ion-label",1),e._uU(55,"Bairro:"),e.qZA(),e.TgZ(56,"ion-input",2),e.NdJ("keyup",function(i){return n.onMudouEnderecoBairro(i)}),e.qZA()()()(),e.TgZ(57,"ion-row")(58,"ion-col")(59,"ion-item")(60,"ion-label",1),e._uU(61,"Cidade:"),e.qZA(),e.TgZ(62,"ion-input",2),e.NdJ("keyup",function(i){return n.onMudouEnderecoCidade(i)}),e.qZA()()()(),e.TgZ(63,"ion-row")(64,"ion-col")(65,"div",4)(66,"ion-item")(67,"ion-label",1),e._uU(68,"Estado:"),e.qZA(),e.TgZ(69,"ion-input",5),e.NdJ("keyup",function(i){return n.onMudouEnderecoEstado(i)}),e.qZA()()()(),e.TgZ(70,"ion-col")(71,"div",4)(72,"ion-item")(73,"ion-label",1),e._uU(74,"Pa\xeds:"),e.qZA(),e.TgZ(75,"ion-input",6),e.NdJ("keyup",function(i){return n.onMudouEnderecoPais(i)}),e.qZA()()()()(),e.TgZ(76,"ion-row")(77,"ion-col")(78,"ion-item")(79,"ion-label",1),e._uU(80,"Telefone"),e.qZA(),e.TgZ(81,"ion-input",7),e.NdJ("keyup",function(i){return n.onMudouTelefone(i)}),e.qZA()()()()()()()),2&t&&(e.xp6(7),e.hij("Ultima atualiza\xe7\xe3o:",n.dataAtualizacao," "),e.xp6(8),e.Q6J("ngModel",null==n.cliente?null:n.cliente.nome),e.xp6(6),e.Q6J("ngModel",null==n.cliente?null:n.cliente.rg),e.xp6(6),e.Q6J("ngModel",null==n.cliente?null:n.cliente.cpf),e.xp6(7),e.Q6J("ngModel",null==n.cliente||null==n.cliente.endereco?null:n.cliente.endereco.logradouro),e.xp6(6),e.Q6J("ngModel",null==n.cliente||null==n.cliente.endereco?null:n.cliente.endereco.numero),e.xp6(5),e.Q6J("ngModel",null==n.cliente||null==n.cliente.endereco?null:n.cliente.endereco.complemento),e.xp6(6),e.Q6J("ngModel",null==n.cliente||null==n.cliente.endereco?null:n.cliente.endereco.cep),e.xp6(5),e.Q6J("ngModel",null==n.cliente||null==n.cliente.endereco?null:n.cliente.endereco.bairro),e.xp6(6),e.Q6J("ngModel",null==n.cliente||null==n.cliente.endereco?null:n.cliente.endereco.cidade),e.xp6(7),e.Q6J("ngModel",null==n.cliente||null==n.cliente.endereco?null:n.cliente.endereco.estado),e.xp6(6),e.Q6J("ngModel",null==n.cliente||null==n.cliente.endereco?null:n.cliente.endereco.pais),e.xp6(6),e.Q6J("ngModel",null==n.cliente?null:n.cliente.telefone))},dependencies:[s.JJ,s.nD,s.On,r.PM,r.FN,r.Zi,r.Dq,r.wI,r.pK,r.Ie,r.Q$,r.q_,r.Nd,r.as,r.j9],styles:[".custom-button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;height:35px;color:rgba(116,114,114,.8);font-size:medium;--background: #FFFF;--background-hover: #9ce0be;--border-color: #ccc;--border-style: solid;--border-width: 1px;--width: 100%;text-transform:none!important}.custom-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:first-child{margin-right:8px;color:#776f6f;font-size:inherit}.texto[_ngcontent-%COMP%]{color:#000}.texto_titulo[_ngcontent-%COMP%]{color:#000;font-weight:700;padding:0,10,10}"]}),o})();var f=d(1501);function E(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-editar-cliente",7),e.NdJ("atualizarCliente",function(l){e.CHM(t);const i=e.oxw();return e.KtG(i.mudouCliente(l))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("cliente",t.cliente)}}function Z(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-editar-prestador",8),e.NdJ("atualizarPrestador",function(l){e.CHM(t);const i=e.oxw();return e.KtG(i.mudouPrestador(l))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("prestador",t.prestador)}}function M(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"ion-button",6),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onClickSalvar())}),e._uU(2,"Salvar"),e.qZA()()}}function T(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"ion-button",6),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onClickSalvarPrestador())}),e._uU(2,"Salvar"),e.qZA()()}}const P=[{path:"",component:(()=>{class o{constructor(t,n,l,i,c){this.apiService=t,this.eventService=n,this.http=l,this.navCtrl=i,this.alertController=c,this.clientes={},this.cliente={},this.prestadores={}}ngOnInit(){console.log(this.apiService.readClienteId()),console.log(this,this.apiService.readPrestadorId()),this.tipoUser=this.apiService.getUserRole(),this.isLoggedIn=this.apiService.readLoginStatus()}onClickSalvar(){this.apiService.putEditarCliente({nome:this.cliente.nome,imgUrl:this.cliente.imgUrl,endereco:{logradouro:this.cliente.endereco.logradouro,numero:this.cliente.endereco.numero,complemento:this.cliente.endereco.complemento,cep:this.cliente.endereco.cep,bairro:this.cliente.endereco.bairro,cidade:this.cliente.endereco.cidade,estado:this.cliente.endereco.estado,pais:this.cliente.endereco.pais},rg:this.cliente.rg,cpf:this.cliente.cpf,telefone:this.cliente.telefone}).subscribe(n=>{this.eventService.emitCadastroAtualizado(),this.mostrarAlerta("Cadastro atualizado!"),this.navCtrl.navigateBack("/hello")},n=>{console.error("Erro ao cadastrar: ",n),this.mostrarAlerta("Erro no cadastro. Verifique os dados e tente novamente.")})}onClickSalvarPrestador(){const t={nome:this.prestador.nome,endereco:{logradouro:this.prestador.endereco.logradouro,numero:this.prestador.endereco.numero,complemento:this.prestador.endereco.complemento,cep:this.prestador.endereco.cep,bairro:this.prestador.endereco.bairro,cidade:this.prestador.endereco.cidade,estado:this.prestador.endereco.estado,pais:this.prestador.endereco.pais},regiao:this.prestador.regiao,rg:this.prestador.rg,cpf:this.prestador.cpf,telefone:this.prestador.telefone,servico:{descricao:this.prestador.servico.descricao,valor:this.prestador.servico.valor},observacao:this.prestador.observacao,disponibilidade:this.prestador.disponibilidade};this.validarFormatoValor()&&this.apiService.putEditarPrestador(t).subscribe(n=>{console.log("Cadastro atualizado!"),this.eventService.emitCadastroAtualizado(),this.mostrarAlerta("Cadastro atualizado!"),this.navCtrl.navigateBack("/hello")},n=>{console.error("Erro ao cadastrar: ",n),this.mostrarAlerta("Erro no cadastro. Verifique os dados e tente novamente.")})}mostrarAlerta(t){return(0,C.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Alerta",message:t,buttons:["OK"]})).present()})}onClickCancelar(){console.log(this.isLoggedIn),this.navCtrl.navigateBack("/hello")}validarFormatoValor(){const t=/^\d+(\.\d{1,2})?$/.test(this.prestador.servico.valor);return t||this.mostrarAlerta("O valor do servi\xe7o deve estar no formato ###.##"),t}validarFormatoRG(){const t=/^\d{1,9}$/.test(this.cliente.rg);return t||this.mostrarAlerta("O valor do RG deve ter at\xe9 9 digitos"),t}mudouCliente(t){this.cliente=t}mudouPrestador(t){this.prestador=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.s),e.Y36(m.P),e.Y36(_.eN),e.Y36(r.SH),e.Y36(r.Br))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-editar"]],decls:18,vars:5,consts:[["slot","start"],[1,"header"],["src","../../../../assets/images/logo_empreget.png"],["scroll-y","true"],[4,"ngIf"],[1,"ion-justify-content-center"],["shape","round","fill","outline",1,"custom-button",3,"click"],[3,"cliente","atualizarCliente"],[3,"prestador","atualizarPrestador"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar"),e._UZ(2,"ion-menu-button",0),e.TgZ(3,"div",1),e._UZ(4,"img",2),e.TgZ(5,"ion-title"),e._uU(6),e.qZA()()()(),e.TgZ(7,"ion-content",3),e.YNc(8,E,2,1,"div",4),e.YNc(9,Z,2,1,"div",4),e.TgZ(10,"ion-grid")(11,"ion-row",5)(12,"ion-col"),e.YNc(13,M,3,0,"div",4),e.YNc(14,T,3,0,"div",4),e.qZA(),e.TgZ(15,"ion-col")(16,"ion-button",6),e.NdJ("click",function(){return n.onClickCancelar()}),e._uU(17,"Cancelar"),e.qZA()()()()()),2&t&&(e.xp6(6),e.Oqu(n.tipoUser),e.xp6(2),e.Q6J("ngIf","CLIENTE"===n.tipoUser),e.xp6(1),e.Q6J("ngIf","PRESTADOR"===n.tipoUser),e.xp6(4),e.Q6J("ngIf","CLIENTE"===n.tipoUser),e.xp6(1),e.Q6J("ngIf","PRESTADOR"===n.tipoUser))},dependencies:[p.O5,r.YG,r.wI,r.W2,r.jY,r.Gu,r.fG,r.Nd,r.wd,r.sr,v,f.f],styles:[".header[_ngcontent-%COMP%]{margin:10px 0;display:flex;align-items:flex-end;text-align:right;max-width:50%}.imgPerfil[_ngcontent-%COMP%]{width:100%}.custom-button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;height:35px;color:rgba(116,114,114,.8);font-size:medium;--background: #FFFF;--background-hover: #9ce0be;--border-color: #ccc;--border-style: solid;--border-width: 1px;--width: 100%;text-transform:none!important}.custom-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:first-child{margin-right:8px;color:#776f6f;font-size:inherit}.texto[_ngcontent-%COMP%]{color:#000}.texto_titulo[_ngcontent-%COMP%]{color:#000;font-weight:700;padding:0,10,10}"]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(P),g.Bz]}),o})(),b=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,s.u5,r.Pc,y]}),o})()}}]);