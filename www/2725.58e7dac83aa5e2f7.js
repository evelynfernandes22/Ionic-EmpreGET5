"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2725],{2725:(T,u,r)=>{r.r(u),r.d(u,{PedidoPageModule:()=>M});var c=r(6895),s=r(433),n=r(4556),g=r(6773),p=r(7582),e=r(8256),h=r(6247),m=r(9426);let P=(()=>{class t{constructor(){this.highlightedDates=[],this.dateSelected=new e.vpe,this.closeCalendar=new e.vpe}ngOnInit(){}onClickOK(o){this.selectedDate=o,console.log(this.selectedDate.value)}onClickCancel(){}onDateSelected(o){new Date(o.detail.value).toISOString().split("T"),this.dateSelected.emit({dataEscolhida:this.selectedDate})}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["calendario"]],outputs:{dateSelected:"dateSelected",closeCalendar:"closeCalendar"},decls:3,vars:3,consts:[["presentation","date",1,"datetime-title",3,"showDefaultTitle","highlightedDates","ngModel","ngModelChange","ionChange"],["slot","title"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-datetime",0),e.NdJ("ngModelChange",function(l){return i.selectedDate=l})("ionChange",function(l){return i.onDateSelected(l)}),e.TgZ(1,"span",1),e._uU(2,"Selecione uma data de Reserva"),e.qZA()()),2&o&&e.Q6J("showDefaultTitle",!0)("highlightedDates",i.highlightedDates)("ngModel",i.selectedDate)},dependencies:[s.JJ,s.On,n.x4,n.QI],styles:['@charset "UTF-8";.datetime-title[_ngcontent-%COMP%]{font-size:14px;line-height:1;margin-bottom:2px}']}),t})();function C(t,a){if(1&t&&(e.TgZ(0,"div")(1,"ion-card-content")(2,"p")(3,"ion-label"),e._uU(4),e.qZA()(),e.TgZ(5,"p")(6,"ion-label"),e._uU(7),e.ALo(8,"number"),e.qZA()(),e.TgZ(9,"p")(10,"ion-label"),e._uU(11),e.qZA()()()()),2&t){const o=e.oxw();e.xp6(4),e.hij("Servi\xe7os: ",null==o.perfilPrestador?null:o.perfilPrestador.servico.descricao,""),e.xp6(3),e.hij("Valor: R$ ",e.xi3(8,4,null==o.perfilPrestador?null:o.perfilPrestador.servico.valor,"1.2-2"),""),e.xp6(4),e.AsE("Observa\xe7\xe3o: ",null==o.perfilPrestador?null:o.perfilPrestador.observacao," ",null==o.perfilPrestador?null:o.perfilPrestador.descricao,"")}}function f(t,a){if(1&t&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&t){const o=a.$implicit;e.xp6(2),e.lnq("",null==o?null:o.endereco.logradouro,", ",null==o?null:o.endereco.numero,", ",null==o?null:o.endereco.bairro,""),e.xp6(2),e.AsE("",null==o?null:o.endereco.cidade,", ",null==o?null:o.endereco.estado,"")}}const v=[{path:"",component:(()=>{class t{constructor(o,i,d){this.apiService=o,this.eventService=i,this.alertController=d,this.mostraCalendarioOnClick=!1,this.osPedido={prestador:{id:null},dataServico:"",periodo:"",tipoDeDiaria:""}}ngOnInit(){this.apiService.getPerfisPrestadoresById().subscribe(o=>{this.perfilPrestador=o},o=>{console.error("Erro ao obter perfil dos prestadores:",o)}),this.apiService.getDataPerfisClientes().subscribe(o=>{this.perfilCliente=o},o=>{console.error("Erro ao obter perfil dos prestadores:",o)})}onClick(){this.osPedido.prestador.id=this.apiService.readPrestadorId(),this.osPedido.dataServico=this.dataPedido.toString().split("T")[0],this.apiService.postPedido(this.osPedido).subscribe(o=>{this.getPedidosPageAndRefresh(),this.mostrarAlerta("Agendamento Realizado com Sucesso!"),this.eventService.emitOSCadastrada()},o=>{console.error("Erro ao cadastrar pedido:",o),this.exibirAlertaErro(o&&o.error&&o.error.userMessage?o.error.userMessage:"Ocorreu um erro ao cadastrar o pedido.")})}exibirAlertaErro(o){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Erro",message:o,buttons:["OK"]})).present()})}mostrarAlerta(o){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"",message:o,buttons:["OK"]})).present()})}mostraCalendario(){this.mostraCalendarioOnClick=!this.mostraCalendarioOnClick}onDateSelected(o){this.dataPedido=o.dataEscolhida}fechaCalendario(){this.mostraCalendarioOnClick=!1}getPedidosPageAndRefresh(){this.apiService.getPedidosPage().subscribe(o=>{this.pedidos=o},o=>{console.error("Erro ao obter dados dos pedidos:",o)})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(h.s),e.Y36(m.P),e.Y36(n.Br))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-pedido"]],decls:41,vars:5,consts:[["slot","start","color","primary"],["src","../../../../assets/images/Logo-transparente.png"],[4,"ngFor","ngForOf"],["placeholder","ESCOLHA A DI\xc1RIA",3,"ngModel","ngModelChange"],["value","DIARIA_CHEIA"],["value","MEIA_DIARIA"],["placeholder","ESCOLHA O PER\xcdODO",3,"ngModel","ngModelChange"],["value","MATUTINO"],["value","VESPERTINO"],["value","COMERCIAL"],[1,"calendario-row"],[3,"dateSelected"],[1,"button-row"],["fill","solid","color","primary","expand","block","routerLink","/historico-agendamentos",3,"click"],["fill","outline","color","primary","expand","block","routerLink","/perfil-prestador"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar"),e._UZ(2,"ion-menu-button",0)(3,"ion-img",1),e.qZA()(),e.TgZ(4,"ion-card")(5,"ion-card-title"),e._uU(6),e.qZA(),e.YNc(7,C,12,7,"div",2),e.qZA(),e.TgZ(8,"ion-content")(9,"ion-label"),e._uU(10,"Local do servi\xe7o:"),e.qZA(),e.YNc(11,f,5,5,"div",2),e.TgZ(12,"ion-grid")(13,"ion-row")(14,"ion-col")(15,"ion-label"),e._uU(16,"Tipo de Di\xe1ria:"),e.qZA(),e.TgZ(17,"ion-select",3),e.NdJ("ngModelChange",function(l){return i.osPedido.tipoDeDiaria=l}),e.TgZ(18,"ion-select-option",4),e._uU(19,"Di\xe1ria cheia"),e.qZA(),e.TgZ(20,"ion-select-option",5),e._uU(21,"Meia di\xe1ria"),e.qZA()()(),e.TgZ(22,"ion-col")(23,"ion-label"),e._uU(24,"Per\xedodo:"),e.qZA(),e.TgZ(25,"ion-select",6),e.NdJ("ngModelChange",function(l){return i.osPedido.periodo=l}),e.TgZ(26,"ion-select-option",7),e._uU(27,"Matutino"),e.qZA(),e.TgZ(28,"ion-select-option",8),e._uU(29,"Vespertino"),e.qZA(),e.TgZ(30,"ion-select-option",9),e._uU(31,"Hor\xe1rio comercial"),e.qZA()()()(),e.TgZ(32,"ion-row",10)(33,"calendario",11),e.NdJ("dateSelected",function(l){return i.onDateSelected(l)}),e.qZA()(),e.TgZ(34,"div",12)(35,"ion-col")(36,"ion-button",13),e.NdJ("click",function(){return i.onClick()}),e._uU(37,"Agendar"),e.qZA()(),e.TgZ(38,"ion-col")(39,"ion-button",14),e._uU(40,"Cancelar"),e.qZA()()()()()),2&o&&(e.xp6(6),e.Oqu(null==i.perfilPrestador?null:i.perfilPrestador.nome),e.xp6(1),e.Q6J("ngForOf",i.perfilCliente),e.xp6(4),e.Q6J("ngForOf",i.perfilCliente),e.xp6(6),e.Q6J("ngModel",i.osPedido.tipoDeDiaria),e.xp6(8),e.Q6J("ngModel",i.osPedido.periodo))},dependencies:[c.sg,s.JJ,s.On,n.YG,n.PM,n.FN,n.Dq,n.wI,n.W2,n.jY,n.Gu,n.Xz,n.Q$,n.fG,n.Nd,n.t9,n.n0,n.sr,n.QI,n.YI,g.rH,P,c.JJ],styles:['@charset "UTF-8";.header-os[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-content[_ngcontent-%COMP%]{--padding-start: 5px;--padding-end: 5px;font-size:12px;size:100%}.ion-justify-content-center[_ngcontent-%COMP%]{justify-content:center}ion-col[size="5"][_ngcontent-%COMP%]{margin:.5rem}h5[_ngcontent-%COMP%]{background-color:#ccc;padding-left:6px}ion-card-content[_ngcontent-%COMP%]{font-size:12px;padding-top:0%;padding-left:1px;padding-right:1px}.grid-button[_ngcontent-%COMP%]{justify-content:center;align-items:center}ion-button[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;height:25px;width:100%;font-size:x-small}.content[_ngcontent-%COMP%]{margin-top:10px;margin-left:5px}ion-icon[name=calendar][_ngcontent-%COMP%]{font-size:2rem;margin:0 auto}.medium-button[_ngcontent-%COMP%]{width:50%;margin:0 auto}ion-img[_ngcontent-%COMP%]{height:50px;padding:1px 30px}.calendario-row[_ngcontent-%COMP%]{margin-bottom:10px}.button-row[_ngcontent-%COMP%]{margin-top:10px}']}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(v),g.Bz]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,s.u5,n.Pc,A]}),t})()}}]);