"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9349],{3005:(b,d,o)=>{o.r(d),o.d(d,{FinalizarOsPageModule:()=>O});var l=o(6895),g=o(433),n=o(4556),a=o(6773),h=o(7582),e=o(8256),u=o(6247),p=o(9426);const f=[{path:"",component:(()=>{class i{constructor(t,s,c,m){this.router=t,this.alertController=s,this.apiService=c,this.eventService=m,this.osFinalizadaSubscription=this.eventService.osFinalizada$.subscribe(()=>{this.getPedidosByIdAndRefresh(),this.getPedidosAndRefresh()})}ngOnInit(){this.tipoUser=this.apiService.getUserRole(),this.idPedido=this.apiService.readId(),this.getPedidosByIdAndRefresh(),this.getPedidosAndRefresh(),this.osFinalizadaSubscription=this.eventService.osFinalizada$.subscribe(()=>{this.getPedidosByIdAndRefresh(),this.getPedidosAndRefresh()})}ngOnDestroy(){this.osFinalizadaSubscription.unsubscribe()}onClickFinalizarOS(){return(0,h.mG)(this,void 0,void 0,function*(){this.finalizaOSAndRefresh(),yield(yield this.alertController.create({header:`Ordem de Servi\xe7o ${this.idPedido}`,message:"Servi\xe7o Conclu\xeddo. Obrigado!",buttons:[{text:"OK",handler:()=>{this.eventService.emitOSFinalizada(),this.router.navigate(["/os-view"])}}]})).present()})}finalizaOSAndRefresh(){this.apiService.putFinalizarOS().subscribe(t=>{this.getPedidosByIdAndRefresh(),this.getPedidosAndRefresh(),this.eventService.emitOSFinalizada()},t=>{console.error("Erro FINALIZAR OS",t)})}getPedidosByIdAndRefresh(){this.apiService.getByIdPedido().subscribe(t=>{this.pedido=t},t=>{console.error("Erro ao obter dados dos pedidos:",t)})}getPedidosAndRefresh(){this.apiService.getPedidos().subscribe(t=>{this.pedidos=t},t=>{console.error("Erro ao obter dados dos pedidos:",t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.F0),e.Y36(n.Br),e.Y36(u.s),e.Y36(p.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-finalizar-os"]],decls:25,vars:2,consts:[[1,"header"],["src","../../../../assets/images/logo_empreget.png"],["slot","start"],["align","center",1,"texto_titulo"],["justify-content-center",""],[1,"justify-content-center"],["shape","round","fill","outline","color","danger",1,"custom-button",3,"click"],[1,"footer"]],template:function(t,s){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"div",0),e._UZ(3,"img",1),e.TgZ(4,"ion-title"),e._uU(5),e.qZA()(),e._UZ(6,"ion-menu-button",2),e.qZA()(),e.TgZ(7,"ion-content"),e._UZ(8,"br")(9,"br")(10,"br"),e.TgZ(11,"div",3),e._uU(12," Ordem de Servi\xe7o n"),e.TgZ(13,"sup"),e._uU(14,"o"),e.qZA(),e._uU(15),e.qZA(),e._UZ(16,"br")(17,"br"),e.TgZ(18,"div")(19,"ion-grid")(20,"ion-row",4)(21,"ion-col",5)(22,"ion-button",6),e.NdJ("click",function(){return s.onClickFinalizarOS()}),e._uU(23,"Finalizar OS"),e.qZA()()()()()(),e._UZ(24,"ion-footer",7)),2&t&&(e.xp6(5),e.Oqu(s.tipoUser),e.xp6(10),e.hij(" ",s.idPedido," "))},dependencies:[n.YG,n.wI,n.W2,n.fr,n.jY,n.Gu,n.fG,n.Nd,n.wd,n.sr],styles:[".header[_ngcontent-%COMP%]{display:flex;align-items:flex-end;text-align:right;max-width:50%}ion-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}ion-button[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;height:25px;width:100%;font-size:x-small}.content[_ngcontent-%COMP%]{margin-top:15px;margin-left:5px;font-size:60%}table[_ngcontent-%COMP%]{border-collapse:collapse;border:1px solid #ccc;width:95%;margin-left:5px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#ccc}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:2px}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:50px;padding:1px 30px}.custom-button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;height:35px;color:rgba(116,114,114,.8);font-size:medium;--background: #FFFF;--background-hover: #9ce0be;--border-color: #ccc;--border-style: solid;--border-width: 1px;--width: 100%;text-transform:none!important}.custom-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:first-child{margin-right:8px;color:#776f6f;font-size:inherit}.texto[_ngcontent-%COMP%]{color:#000}.texto_titulo[_ngcontent-%COMP%]{color:#000;font-weight:700;padding:0,10,10}"]}),i})()}];let P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[a.Bz.forChild(f),a.Bz]}),i})(),O=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[l.ez,g.u5,n.Pc,P]}),i})()}}]);